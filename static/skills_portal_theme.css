:root{
  --accent:#c1272d;
  --sidebar-bg:#333333;

  /* Accent RGB (pour rings / rgba cohérents) */
  --sb-accent-rgb: 193,39,45;

  /* Neutres */
  --sb-gray-900:#111827;
  --sb-gray-700:#374151;
  --sb-gray-500:#6b7280;
  --sb-gray-300:#d1d5db;
  --sb-gray-200:#e5e7eb;
  --sb-gray-100:#f3f4f6;
  --sb-gray-50:#fafafa;

  /* Sémantiques */
  --sb-success: rgb(62,190,73);
  --sb-danger: rgb(220,38,38);
  --sb-warning: rgb(245,158,11);
  --sb-info: #0284c7;
  --sb-violet: #7c3aed;

  /* Typo */
  --sb-fs-12: 12px;
  --sb-fs-13: 13px;
  --sb-fs-14: 14px;

  /* Rayons */
  --sb-r-8: 8px;
  --sb-r-10: 10px;
  --sb-r-12: 12px;
  --sb-r-pill: 999px;

  /* Soft (boutons secondaires/reset) */
  --sb-soft-border: color-mix(in srgb, var(--accent) 35%, var(--sb-gray-300));
  --sb-soft-bg: color-mix(in srgb, var(--accent) 8%, #ffffff);
  --sb-soft-bg-hover: color-mix(in srgb, var(--accent) 12%, #ffffff);

  /* Focus ring */
  --sb-ring-accent: 0 0 0 3px rgba(var(--sb-accent-rgb), 0.18);

  /*Special */
  --sb-comp: rgb(55, 99, 167);
  --sb-critere: rgb(121, 72, 37);
}


/* ======================================================
   CORE (Standards UI)
   - Additif uniquement : ne casse aucune vue existante
   - On recâble ensuite écran par écran (JS/HTML)
   ====================================================== */

/* -------- Primitives -------- */
.sb-muted{ color: var(--sb-gray-500); }
.sb-nowrap{ white-space: nowrap; }
.sb-ellipsis{ white-space: nowrap; overflow: hidden; text-overflow: ellipsis; min-width:0; }
.col-center{ text-align:center !important; }

/* -------- Buttons -------- */
.sb-btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  height:32px;
  padding:0 12px;
  border:1px solid var(--sb-gray-300);
  border-radius: var(--sb-r-10);
  background:#fff;
  color: var(--sb-gray-900);
  font-weight:600;
  font-size: var(--sb-fs-13);
  cursor:pointer;
  user-select:none;
}

.sb-btn:hover{ filter: brightness(0.98); }
.sb-btn:active{ transform: translateY(1px); }

.sb-btn:focus{
  outline:none;
  box-shadow: var(--sb-ring-accent);
}

.sb-btn--soft{
  border-color: var(--sb-soft-border);
  background: var(--sb-soft-bg);
  color: #1f2937;
}

.sb-btn--soft:hover{ background: var(--sb-soft-bg-hover); }

.sb-btn--accent{
  background: var(--accent);
  border-color: var(--accent);
  color:#fff;
}

.sb-btn--accent:hover{ filter: brightness(0.92); }

/* -------- Badges -------- */
.sb-badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  height:22px;
  padding:0 10px;
  border-radius: var(--sb-r-pill);
  font-size: var(--sb-fs-12);
  font-weight:800;
  line-height:1;
  white-space:nowrap;
  border:1px solid var(--sb-gray-300);
  background: transparent;
  color: var(--sb-gray-900);
  box-sizing:border-box;
}

.sb-badge--success{ background: var(--sb-success); border-color: var(--sb-success); color:#fff; }
.sb-badge--danger{  background: var(--sb-danger);  border-color: var(--sb-danger);  color:#fff; }
.sb-badge--warning{ background: var(--sb-warning); border-color: var(--sb-warning); color:#fff; }
.sb-badge--info{    background: var(--sb-info);    border-color: var(--sb-info);    color:#fff; }
.sb-badge--violet{  background: var(--sb-violet);  border-color: var(--sb-violet);  color:#fff; }

/* Badge "Critère" (grille d'évaluation) */
.sb-badge.sb-badge-critere{
  font-size: 11px;          /* police plus petite */
  font-weight: 600;         /* plus “badge” */
  height: 22px;             /* garde le gabarit */
  padding: 0 10px;
  
  background: color-mix(in srgb, var(--accent) 10%, #ffffff);
  border-color: var(--sb-critere);
  color: var(--sb-critere);
}


/* -------- Tables (modifiers) -------- */
.sb-table{ width:100%; border-collapse: separate; border-spacing:0; }

.sb-table--airy thead th{
  text-align:left;
  font-weight:600;
  font-size: var(--sb-fs-13);
  color: var(--sb-gray-900);
  padding:12px 16px;
  border-bottom:1px solid var(--sb-gray-200);
  white-space:nowrap;
}

.sb-table--airy tbody td{
  padding:12px 16px;
  vertical-align:middle;
  border-bottom:1px solid var(--sb-gray-100);
  line-height:1.35;
  font-size: var(--sb-fs-14);
}

.sb-table--zebra tbody tr:nth-child(even){ background: var(--sb-gray-50); }
.sb-table--hover tbody tr:hover{ background: var(--sb-gray-100); }

/* -------- Modal title line (badge + texte sur 1 ligne) -------- */
.sb-modal-titleline{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:0;
}

.sb-modal-titleline .sb-title-text{
  min-width:0;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  font-size: 15px;
  font-weight: 800;
}

/* -------- Buttons (modifiers manquants) -------- */
.sb-btn--xs{
  height:26px;
  padding:0 10px;
  font-size: var(--sb-fs-12);
  border-radius: var(--sb-r-10);
}

.sb-btn--block{ width:100%; }

/* -------- Cards (état actif, ex: Pareto KPI) -------- */
.sb-card--active{
  outline:2px solid rgba(148,163,184,0.9);
  background: rgba(148,163,184,0.08);
}

/* -------- Compat / alias (déjà utilisés dans tes JS existants) -------- */
.sb-modal-titleline .sb-ref-title-text{
  min-width:0;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Badge code compétence (si tu gardes ce nom au lieu de sb-badge--success) */
.sb-badge.sb-badge-ref-comp-code{
  background: var(--sb-comp);
  border-color: var(--sb-comp);
  color:#fff;
  font-weight: 700;
}


/* Collaborateurs: tables plus aérées et lisibles (aligné référentiel) */
#view-vos-collaborateurs .sb-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}

#view-vos-collaborateurs .sb-table thead th {
  text-align: left;
  font-weight: 600;
  font-size: 13px;
  color: #111827;
  padding: 12px 16px;
  border-bottom: 1px solid #e5e7eb;
  white-space: nowrap;
}

#view-vos-collaborateurs .sb-table tbody td {
  padding: 12px 16px;
  vertical-align: middle;
  border-bottom: 1px solid #f3f4f6;
  line-height: 1.35;
}

#view-vos-collaborateurs .sb-table tbody tr:nth-child(even) {
  background: #fafafa;
}

#view-vos-collaborateurs .sb-table tbody tr:hover {
  background: #f3f4f6;
}

/* Nom plus lisible */
#view-vos-collaborateurs .sb-table tbody td:nth-child(1) {
  font-weight: 700;
}

/* Alignements (statut + dates centrés) */
#view-vos-collaborateurs .sb-table tbody td:nth-child(4),
#view-vos-collaborateurs .sb-table tbody td:nth-child(5),
#view-vos-collaborateurs .sb-table tbody td:nth-child(6),
#view-vos-collaborateurs .sb-table thead th:nth-child(4),
#view-vos-collaborateurs .sb-table thead th:nth-child(5),
#view-vos-collaborateurs .sb-table thead th:nth-child(6) {
  text-align: center;
}

/* Dates sur une ligne */
#view-vos-collaborateurs .sb-table tbody td:nth-child(5),
#view-vos-collaborateurs .sb-table tbody td:nth-child(6) {
  white-space: nowrap;
}

/* Tailles de colonnes (équilibre visuel) */
#view-vos-collaborateurs .sb-table thead th:nth-child(1) { width: 180px; } /* Nom */
#view-vos-collaborateurs .sb-table thead th:nth-child(2) { width: 150px; } /* Service */
#view-vos-collaborateurs .sb-table thead th:nth-child(4) { width: 120px; } /* Statut */
#view-vos-collaborateurs .sb-table thead th:nth-child(5) { width: 110px; } /* Entrée */
#view-vos-collaborateurs .sb-table thead th:nth-child(6) { width: 130px; } /* Sortie prévue */
#view-vos-collaborateurs .sb-table thead th:nth-child(7) { width: 220px; } /* Contact */

/* Contact: autoriser retour à la ligne si besoin */
#view-vos-collaborateurs .sb-table tbody td:nth-child(7) {
  white-space: normal;
}

/* --- Vos collaborateurs : compact + Poste plus large + suppression colonne Contact --- */

/* Police légèrement plus petite */
#view-vos-collaborateurs .sb-table thead th{ font-size: 12px; }
#view-vos-collaborateurs .sb-table tbody td{ font-size: 13px; }

/* Poste (col 3) plus large */
#view-vos-collaborateurs .sb-table thead th:nth-child(3){ width: 320px; }

/* Masquer la colonne Contact (col 7) */
#view-vos-collaborateurs .sb-table thead th:nth-child(7),
#view-vos-collaborateurs .sb-table tbody td:nth-child(7){
  display: none;
}

/* Vos collaborateurs : tuile Indisponibilités (colonne filtres) */
#collabIndispoTile .row{
  gap: 10px;
  flex-wrap: wrap;
}

#collabIndispoTile .row .card{
  flex: 1 1 140px;
  min-width: 140px;
}

/* Vos collaborateurs : bouton tuile Indisponibilités en rouge Insights */
#btnOpenIndispoPlanning{
  background: var(--accent) !important;
  border-color: var(--accent) !important;
  color: #fff !important;
}

#btnOpenIndispoPlanning:hover{
  filter: brightness(0.92);
}

#btnOpenIndispoPlanning:focus{
  box-shadow: 0 0 0 3px rgba(193,39,45,0.18);
}


/* Planning indisponibilités : calendrier type agenda (vue mois) */
#view-planning-indispo #planCalendar .sb-cal{
  width: 100%;
}

#view-planning-indispo #planCalendar .sb-cal-head{
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  border-bottom: 1px solid #e5e7eb;
}

#view-planning-indispo #planCalendar .sb-cal-wd{
  padding: 10px 8px;
  font-size: 12px;
  font-weight: 700;
  color: #374151;
  text-align: left;
  user-select: none;
}

#view-planning-indispo #planCalendar .sb-cal-grid{
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  grid-auto-rows: 120px;
}

#view-planning-indispo #planCalendar .sb-cal-day{
  position: relative;
  padding: 8px;
  background: #fff;
  border-right: 1px solid #f3f4f6;
  border-bottom: 1px solid #f3f4f6;
  overflow: hidden;
}

#view-planning-indispo #planCalendar .sb-cal-day:nth-child(7n){
  border-right: none;
}

#view-planning-indispo #planCalendar .sb-cal-day.is-out{
  background: #fafafa;
  color: #6b7280;
}

#view-planning-indispo #planCalendar .sb-cal-day.is-today{
  box-shadow: inset 0 0 0 2px var(--accent);
  border-radius: 10px;
}

#view-planning-indispo #planCalendar .sb-cal-daynum{
  font-size: 12px;
  font-weight: 700;
  color: #111827;
  line-height: 1;
}

#view-planning-indispo #planCalendar .sb-cal-evts{
  margin-top: 6px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  max-height: 92px;
  overflow: hidden;
}

#view-planning-indispo #planCalendar .sb-cal-evt{
  font-size: 11px;
  line-height: 1.2;
  color: #fff;
  padding: 3px 6px;
  border-radius: 8px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  cursor: pointer;
}

#view-planning-indispo #planCalendar .sb-cal-more{
  font-size: 11px;
  color: #6b7280;
  margin-top: 2px;
  user-select: none;
}

/* Planning indisponibilités : liste collaborateurs + légende */
#view-planning-indispo .sb-collab-pick{
  display: flex;
  flex-direction: column;
  gap: 6px;
  max-height: 260px;
  overflow: auto;
  padding-right: 4px;
}

#view-planning-indispo .sb-collab-pick-row{
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  background: #fff;
}

#view-planning-indispo .sb-collab-pick-row input[type="checkbox"]{
  transform: translateY(1px);
}

#view-planning-indispo .sb-dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  flex: 0 0 10px;
}

#view-planning-indispo .sb-collab-pick-name{
  font-size: 13px;
  font-weight: 600;
  color: #111827;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1 1 auto;
}

#view-planning-indispo .sb-collab-pick-svc{
  font-size: 12px;
  color: #6b7280;
  white-space: nowrap;
  flex: 0 0 auto;
}

#view-planning-indispo .sb-legend{
  display: flex;
  flex-direction: column;
  gap: 6px;
}

#view-planning-indispo .sb-legend-item{
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: #111827;
}

/* Planning indisponibilités : boutons header en rouge Insights */
#view-planning-indispo #btnPlanBack,
#view-planning-indispo #btnPlanAdd{
  background: var(--accent) !important;
  border-color: var(--accent) !important;
  color: #fff !important;
}

#view-planning-indispo #btnPlanBack:hover,
#view-planning-indispo #btnPlanAdd:hover{
  filter: brightness(0.92);
}

#view-planning-indispo #btnPlanBack:focus,
#view-planning-indispo #btnPlanAdd:focus{
  box-shadow: 0 0 0 3px rgba(193,39,45,0.18);
}


/* Modal batch indisponibilités : inputs date plus modernes */
#modalBreakBatch input[type="date"]{
  width: 100%;
  height: 24px;
  padding: 8px 10px;
  border: 1px solid #d1d5db;
  border-radius: 10px;
  background: #fff;
  font-size: 13px;
  color: #111827af;
  outline: none;
  box-shadow: none;
}

#modalBreakBatch input[type="date"]:focus{
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(193,39,45,0.15);
}

#modalBreakBatch .sb-table td{
  vertical-align: middle;
}

#modalBreakBatch .sb-batch-del{
  width: 22px;
  height: 22px;
  padding: 0;
  border-radius: 10px;
  line-height: 1;
}

/* Modal batch : feedback par ligne (OK / erreur) */
#modalBreakBatch .sb-batch-status{
  font-size: 12px;
  font-weight: 600;
  color: #6b7280;
}

#modalBreakBatch tr.is-ok .sb-batch-status{
  color: #065f46;
}

#modalBreakBatch tr.is-err .sb-batch-status{
  color: #b91c1c;
}

#modalBreakBatch tr.is-err input[type="date"]{
  border-color: #fca5a5;
  box-shadow: 0 0 0 3px rgba(239,68,68,0.10);
}


#modalBreakEdit input[type="date"]{
  width: 100%;
  height: 24px;
  padding: 2px 8px;
  border: 1px solid #d1d5db;
  border-radius: 10px;
  background: #fff;
  font-size: 13px;
  color: #111827;
  outline: none;
  box-shadow: none;
}


#modalBreakEdit input[type="date"]:focus{
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(193,39,45,0.15);
}

#modalBreakEdit .sb-radio-row{
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  background: #fff;
  cursor: pointer;
  user-select: none;
}

#modalBreakEdit .sb-radio-row input[type="radio"]{
  transform: translateY(1px);
}

#modalBreakEdit .sb-radio-card{
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  background: #fff;
  padding: 12px;
}

#modalBreakEdit .sb-edit-dates-grid{
  margin-left: 16px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
}

#modalBreakEdit .sb-edit-dates-grid .info-item{
  min-width: 0;
}

#modalBreakEdit .sb-edit-dates-grid input[type="date"]{
  min-width: 0;
  box-sizing: border-box;
}

@media (max-width: 720px){
  #modalBreakEdit .sb-edit-dates-grid{
    grid-template-columns: 1fr;
    margin-left: 0;
  }
}
/* Référentiel compétences: tables plus aérées et lisibles */
#view-referentiel-competences .sb-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}

#view-referentiel-competences .sb-table thead th {
  text-align: left;
  font-weight: 600;
  font-size: 13px;
  color: #111827;
  padding: 12px 16px;
  border-bottom: 1px solid #e5e7eb;
  white-space: nowrap;
}

#view-referentiel-competences .sb-table tbody td {
  padding: 12px 16px;
  vertical-align: middle;
  border-bottom: 1px solid #f3f4f6;
  line-height: 1.35;
}

#view-referentiel-competences .sb-table tbody tr:nth-child(even) {
  background: #fafafa;
}

#view-referentiel-competences .sb-table tbody tr:hover {
  background: #f3f4f6;
}

#view-referentiel-competences .col-center {
  text-align: center !important;
}

#view-referentiel-competences .col-dom { width: 60px; }
#view-referentiel-competences .col-code { width: 90px; font-weight: 700; white-space: nowrap; }
#view-referentiel-competences .col-level { width: 110px; white-space: nowrap; }
#view-referentiel-competences .col-postes { width: 80px; white-space: nowrap; }
#view-referentiel-competences .col-detail { width: 90px; white-space: nowrap; }

#view-referentiel-competences .domain-dot {
  display: inline-block;
  width: 14px;
  height: 14px;
  border-radius: 6px;
  border: 1px solid #d1d5db;
}

#view-referentiel-competences .btn-secondary.btn-xs {
  padding: 6px 10px;
  font-size: 12px;
  margin-left: 0;
}

/* Domaine en détail (modal) : dot + libellé */
#view-referentiel-competences .domain-pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 4px 10px;
  border: 1px solid #d1d5db;
  border-radius: 999px;
  font-size: 12px;
  color: #374151;
  background: #fff;
}

#view-referentiel-competences .domain-pill .domain-dot {
  width: 10px;
  height: 10px;
  border-radius: 999px;
}

/* Modal référentiel: éviter le titre hors écran + permettre le scroll */
#modalRefDetail.modal.show {
  align-items: flex-start;
}

#modalRefDetail .modal-card {
  margin-top: 24px;
  max-height: calc(100vh - 48px);
  display: flex;
  flex-direction: column;

  /* élargissement modal détail référentiel */
  width: 920px;
  max-width: calc(100vw - 40px);
}


#modalRefDetail .modal-body {
  overflow: auto;
  flex: 1 1 auto;
}

/* Modal Référentiel — Grille d’évaluation : lisibilité (espacement des bullets) */
#modalRefDetail .sb-acc-body ul{
  /* on ne touche pas à padding-left (déjà inline), on ajoute juste de l’air */
  padding-top: 6px;
  padding-bottom: 2px;
}

#modalRefDetail .sb-acc-body li{
  line-height: 1.45;      /* lecture plus fluide */
  margin: 6px 0;          /* espace entre items */
  font-size: 13px;
}

#modalRefDetail .sb-acc-body li:last-child{
  margin-bottom: 0;
}


/* Modal Référentiel — Niveaux en tableau (badge | texte) */
#modalRefDetail .ref-levels-table {
  display: flex;
  flex-direction: column;
  margin-top: 10px;
  font-size: 14px;        /* police un peu plus petite */
  line-height: 1.25;
}

/* Responsive : sur petit écran, on empile badge + texte */
@media (max-width: 520px) {
  #modalRefDetail .ref-level-row {
    grid-template-columns: 1fr;
    row-gap: 6px;
  }

  #modalRefDetail .ref-level-badge {
    justify-self: start;
    min-width: 0;
  }
}

#modalRefDetail .ref-level-row {
  display: grid;

  /* Colonne badge fixe (alignement nickel) */
  grid-template-columns: 150px 1fr;

  /* Air entre badge et texte */
  column-gap: 16px;

  align-items: start;
  padding: 8px 6px;
  border-bottom: 1px solid rgba(209, 213, 219, 0.65);
}

/* micro feedback visuel sans “arc-en-ciel” */
#modalRefDetail .ref-level-row:hover {
  background: rgba(17, 24, 39, 0.03);
  border-radius: 8px;
}

#modalRefDetail .ref-level-row:last-child {
  border-bottom: 0;
}

#modalRefDetail .ref-level-badge {
  white-space: nowrap;
  font-size: 12px;
  font-weight: 500;

  /* Badge = largeur de colonne (tous identiques) */
  width: 100%;
  box-sizing: border-box;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  /* Compact mais lisible */
  padding: 4px 8px;
}

#modalRefDetail .ref-level-text {
  color: #111827;
}

/* Modal Référentiel — Postes concernés : compact + badge criticité */
#modalRefDetail .sb-ref-postes-table thead th{
  font-size: 12px;
}

#modalRefDetail .sb-ref-postes-table tbody td{
  font-size: 12.5px; /* on baisse un poil la police sur toute la ligne */
}

#modalRefDetail .sb-ref-postes-table tbody tr{
  line-height: 1.25;
}

/* Badge criticité : rond, fond transparent, bord violet avec 5 niveaux de teinte */
#modalRefDetail .sb-crit-badge{
  --crit-violet: 124,58,237; /* violet */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 700;
  line-height: 1;
  background: transparent;
  border: 2px solid rgba(var(--crit-violet), 0.45);
  color: rgba(var(--crit-violet), 0.85);
  box-sizing: border-box;
  user-select: none;
}

#modalRefDetail .sb-crit-l1{ border-color: rgba(var(--crit-violet), 0.25); color: rgba(var(--crit-violet), 0.55); }
#modalRefDetail .sb-crit-l2{ border-color: rgba(var(--crit-violet), 0.40); color: rgba(var(--crit-violet), 0.68); }
#modalRefDetail .sb-crit-l3{ border-color: rgba(var(--crit-violet), 0.55); color: rgba(var(--crit-violet), 0.78); }
#modalRefDetail .sb-crit-l4{ border-color: rgba(var(--crit-violet), 0.72); color: rgba(var(--crit-violet), 0.88); }
#modalRefDetail .sb-crit-l5{ border-color: rgba(var(--crit-violet), 0.92); color: rgba(var(--crit-violet), 1.00); }

/* ============================
   Collaborateurs: boutons (soft)
   ============================ */

#view-vos-collaborateurs #btnCollabReset {
  border-color: color-mix(in srgb, var(--accent) 35%, #d1d5db);
  background: color-mix(in srgb, var(--accent) 8%, #ffffff);
  color: #1f2937;
  font-weight: 600;
}

#view-vos-collaborateurs #btnCollabReset:hover {
  background: color-mix(in srgb, var(--accent) 12%, #ffffff);
}

#view-vos-collaborateurs #btnCollabReset:active {
  transform: translateY(1px);
}

/* Bouton "Fermer" (footer modal collaborateur) */
#modalCollaborateur #btnCollabModalClose {
  border-color: color-mix(in srgb, var(--accent) 35%, #087016);
  background: color-mix(in srgb, var(--accent) 8%, #d2ffac);
  color: #1f2937;
  font-weight: 600;
}

#modalCollaborateur #btnCollabModalClose:hover {
  background: color-mix(in srgb, var(--accent) 12%, #ffffff);
}

/* Croix (header modal collaborateur) */
#modalCollaborateur .modal-x {
  color: var(--accent);
}

#modalCollaborateur .modal-x:hover {
  background: color-mix(in srgb, var(--accent) 10%, transparent);
  border-radius: 8px;
}

/* Badge Code compétence: fond plein + texte blanc */
#modalCollaborateur .sb-badge.sb-badge-comp-code{
  background:#26d34b;
  color:#fff;
  border-color:#26d34b;
  font-weight:700;
}

/* ============================
   Référentiel: boutons (soft)
   ============================ */

#view-referentiel-competences #btnRefReset {
  border-color: color-mix(in srgb, var(--accent) 35%, #d1d5db);
  background: color-mix(in srgb, var(--accent) 8%, #ffffff);
  color: #1f2937;
  font-weight: 600;
}

#view-referentiel-competences #btnRefReset:hover {
  background: color-mix(in srgb, var(--accent) 12%, #ffffff);
}

#view-referentiel-competences #btnRefReset:active {
  transform: translateY(1px);
}

/* Bouton "Fermer" (footer modal détail) */
#modalRefDetail #btnRefModalClose {
  border-color: color-mix(in srgb, var(--accent) 35%, #087016);
  background: color-mix(in srgb, var(--accent) 8%, #d2ffac);
  color: #1f2937;
  font-weight: 600;
}

#modalRefDetail #btnRefModalClose:hover {
  background: color-mix(in srgb, var(--accent) 12%, #ffffff);
}

/* Croix (header modal) */
#modalRefDetail .modal-x {
  color: var(--accent);
}

#modalRefDetail .modal-x:hover {
  background: color-mix(in srgb, var(--accent) 10%, transparent);
  border-radius: 8px;
}


/* ============================
   Cartographie: heatmap (V1)
   ============================ */

#view-cartographie-competences .sb-heatmap {
  width: 100%;
  min-height: 120px;
}

/* Sur mobile / petits écrans, éviter que tout écrase */
@media (max-width: 900px) {
  #view-cartographie-competences .sb-heatmap {
    min-width: 720px;
  }
}

/* Bouton reset (soft comme référentiel) */
#view-cartographie-competences #btnMapReset {
  border-color: color-mix(in srgb, var(--accent) 35%, #d1d5db);
  background: color-mix(in srgb, var(--accent) 8%, #ffffff);
  color: #1f2937;
  font-weight: 600;
}

#view-cartographie-competences #btnMapReset:hover {
  background: color-mix(in srgb, var(--accent) 12%, #ffffff);
}

#view-cartographie-competences #btnMapReset:active {
  transform: translateY(1px);
}

/* Modal cartographie: scroll + cohérence */
#modalMapDetail.modal.show {
  align-items: flex-start;
}

#modalMapDetail .modal-card {
  margin-top: 24px;
  max-height: calc(100vh - 48px);
  display: flex;
  flex-direction: column;
}

#modalMapDetail .modal-body {
  overflow: auto;
  flex: 1 1 auto;
}

/* Bouton fermer (footer) + croix */
#modalMapDetail #btnMapModalClose {
  border-color: color-mix(in srgb, var(--accent) 35%, #087016);
  background: color-mix(in srgb, var(--accent) 8%, #d2ffac);
  color: #1f2937;
  font-weight: 600;
}

#modalMapDetail #btnMapModalClose:hover {
  background: color-mix(in srgb, var(--accent) 12%, #ffffff);
}

#modalMapDetail .modal-x {
  color: var(--accent);
}

#modalMapDetail .modal-x:hover {
  background: color-mix(in srgb, var(--accent) 10%, transparent);
  border-radius: 8px;
}

#modalMapDetail .sb-badge.sb-badge-poste-code{
  background: rgb(62, 190, 73);     /* backcolor */
  color: #ffffff;          /* forecolor */
  border-color: rgb(62, 190, 73);   /* cohérent si le badge a une bordure */
  font-weight: 700;
}

/* Cartographie — Couverture (badge) */
#modalMapDetail .sb-badge.sb-badge-cover-0{
  background: rgb(220,38,38);
  color:#fff;
  border-color: rgb(220,38,38);
}
#modalMapDetail .sb-badge.sb-badge-cover-1{
  background: rgb(245,158,11);
  color:#fff;
  border-color: rgb(245,158,11);
}
#modalMapDetail .sb-badge.sb-badge-cover-2{
  background: rgb(62,190,73);
  color:#fff;
  border-color: rgb(62,190,73);
}

/* Cartographie — indicateur conformité niveau porteur */
#modalMapDetail .sb-niv-dot{
  width: 10px;
  height: 10px;
  border-radius: 2px; /* petit carré légèrement adouci */
  display: inline-block;
  flex: 0 0 auto;
}

#modalMapDetail .sb-niv-dot-ok{
  background: rgb(62,190,73);
  border: 1px solid rgb(62,190,73);
}

#modalMapDetail .sb-niv-dot-ko{
  background: rgb(220,38,38);
  border: 1px solid rgb(220,38,38);
}


/* ============================
   Cartographie: Heatmap (WOW)
   ============================ */

#view-cartographie-competences .hm-legend{
  display:flex;
  align-items:center;
  gap:8px;
  margin: 10px 0 10px 0;
  color:#6b7280;
  font-size:12px;
}

#view-cartographie-competences .hm-legend-lab{ white-space:nowrap; }

#view-cartographie-competences .hm-swatch{
  width:22px;
  height:10px;
  border-radius:6px;
  border:1px solid #e5e7eb;
  display:inline-block;
}

#view-cartographie-competences .hm-wrap{
  overflow:auto;
  border:1px solid #eef2f7;
  border-radius:12px;
}

#view-cartographie-competences .hm-table{
  width:max-content;
  min-width:100%;
  border-collapse:separate;
  border-spacing:0;
  table-layout:fixed;
}

#view-cartographie-competences .hm-table thead th{
  position:sticky;
  top:0;
  background:#fafafa;
  z-index:4;
  font-weight:600;
  font-size:13px;
  color:#111827;
  padding:12px 14px;
  border-bottom:1px solid #e5e7eb;
  text-align:left;
  white-space:nowrap;
}

#view-cartographie-competences .hm-rowhead{
  min-width: 320px;
  max-width: 360px;
}

#view-cartographie-competences .hm-table tbody td{
  padding:10px 12px;
  border-bottom:1px solid #f3f4f6;
  vertical-align:middle;
}

#view-cartographie-competences .hm-sticky.hm-rowhead{
  position:sticky;
  left:0;
  background:#fff;
  z-index:3;
  border-right:1px solid #eef2f7;
}

#view-cartographie-competences .hm-poste-title{
  font-weight:600;
  color:#111827;
  line-height:1.2;
}

#view-cartographie-competences .hm-poste-sub{
  font-size:12px;
  color:#6b7280;
  margin-top:2px;
}

#view-cartographie-competences .hm-colhead{
  text-align:center;
  min-width:140px;              /* un peu plus large pour respirer */
}

#view-cartographie-competences .hm-dom-dot{
  display:inline-block;
  width:12px;
  height:12px;
  border-radius:3px;            /* carré arrondi léger (pas rond) */
  border:1px solid #d1d5db;
  vertical-align:middle;
  margin-right:8px;
  background:#e5e7eb;
  flex:0 0 auto;
}

#view-cartographie-competences .hm-dom-txt{
  display:inline-block;
  vertical-align:middle;
  max-width:140px;              /* tronque proprement */
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

#view-cartographie-competences .hm-cell{
  text-align:center;
  min-width:64px;
  height:46px;
  font-weight:700;
  border-left:1px solid #f3f4f6;
  border-radius:10px;
  cursor:pointer;
  user-select:none;
  transition: filter .12s ease, transform .06s ease;
}

#view-cartographie-competences .hm-cell:hover{
  filter: brightness(0.98);
  transform: translateY(-1px);
}

#view-cartographie-competences .hm-totalhead,
#view-cartographie-competences .hm-totalcell{
  background:#fafafa;
  font-weight:700;
}

#view-cartographie-competences .hm-totalrowlab{
  font-weight:700;
}

#view-cartographie-competences .hm-grandtotal{
  background:#f3f4f6;
  font-weight:800;
}

/* Niveaux de charge (palette sobre) */
#view-cartographie-competences .hm-lvl-0{ background:#ffffff; }
#view-cartographie-competences .hm-lvl-1{ background:color-mix(in srgb, var(--accent) 10%, #fff); }
#view-cartographie-competences .hm-lvl-2{ background:color-mix(in srgb, var(--accent) 18%, #fff); }
#view-cartographie-competences .hm-lvl-3{ background:color-mix(in srgb, var(--accent) 26%, #fff); }
#view-cartographie-competences .hm-lvl-4{ background:color-mix(in srgb, var(--accent) 34%, #fff); }
#view-cartographie-competences .hm-lvl-5{ background:color-mix(in srgb, var(--accent) 42%, #fff); }


/* ======================================================
   Skills — OVERRIDES STABLES (RESTORE)
   Objectif:
   - Reset en teal partout (skills_*)
   - Modals: hauteur max + scroll interne
   - Boutons "Fermer" uniformes sur tous les modals
   NB: section volontairement en fin de fichier (priorité CSS)
   ====================================================== */

:root{
  /* Accent de lecture (calme) */
  --reading-accent: #0d9488;
  --reading-accent-hover: #0f766e;
  --reading-accent-press: #115e59;
  --reading-accent-ring: rgba(13,148,136,0.30);

  /* Bouton Fermer (uniforme) */
  --modal-close-bg: #ffffff;
  --modal-close-border: #cbd5e1;
  --modal-close-text: #0f172a;
  --modal-close-hover-bg: #f8fafc;
}

/* ---------- Boutons RESET (teal) ---------- */
/* Priorité haute pour écraser les styles par vue existants */
button.btn-secondary[id$="Reset"],
#view-cartographie-competences #btnMapReset,
#view-vos-collaborateurs #btnCollabReset,
#view-referentiel-competences #btnRefReset,
#view-analyse-competences #btnAnalyseReset{
  background: var(--reading-accent) !important;
  border-color: var(--reading-accent) !important;
  color: #ffffff !important;
}

button.btn-secondary[id$="Reset"]:hover,
#view-cartographie-competences #btnMapReset:hover,
#view-vos-collaborateurs #btnCollabReset:hover,
#view-referentiel-competences #btnRefReset:hover,
#view-analyse-competences #btnAnalyseReset:hover{
  background: var(--reading-accent-hover) !important;
  border-color: var(--reading-accent-hover) !important;
}

button.btn-secondary[id$="Reset"]:active,
#view-cartographie-competences #btnMapReset:active,
#view-vos-collaborateurs #btnCollabReset:active,
#view-referentiel-competences #btnRefReset:active,
#view-analyse-competences #btnAnalyseReset:active{
  background: var(--reading-accent-press) !important;
  border-color: var(--reading-accent-press) !important;
}

button.btn-secondary[id$="Reset"]:focus{
  outline: none;
  box-shadow: 0 0 0 3px var(--reading-accent-ring);
}

/* ---------- MODALS: hauteur max + scroll interne ---------- */
.modal.show{
  align-items: flex-start; /* évite "centre" + overflow invisible */
}

.modal-card{
  max-height: calc(100vh - 32px);
  display: flex;
  flex-direction: column;
}

.modal-body{
  overflow: auto;
}

/* ---------- Boutons "Fermer" uniformes ---------- */
button[id$="ModalClose"]{
  background: var(--modal-close-bg) !important;
  border: 1px solid var(--modal-close-border) !important;
  color: var(--modal-close-text) !important;
}

button[id$="ModalClose"]:hover{
  background: var(--modal-close-hover-bg) !important;
}

button[id$="ModalClose"]:active{
  transform: translateY(1px);
}



/* ======================================================
   Analyse compétences: couleurs centralisées (v1)
   Objectif: ne plus mettre de couleurs en inline JS.
   ====================================================== */

:root{
  /* Accent UI (par défaut = couleur marque). Tu peux le surcharger par vue. */
  --ui-accent: var(--accent);

  /* Badges d'écarts (matching) */
  --gap-missing: #ef4444;
  --gap-under: #f59e0b;
  --gap-zero-bg: #e5e7eb;
  --gap-zero-fg: #6b7280;
  --gap-zero-border: #d1d5db;
}

/* Tuile sélectionnée (Analyse compétences) */
#view-analyse-competences .analyse-tile.active{
  outline: 2px solid color-mix(in srgb, var(--reading-accent) 65%, #ffffff) !important;
}

/* KPI sélectionné (tuiles) */
#view-analyse-competences .mini-kpi.is-active{
  border-color: color-mix(in srgb, var(--reading-accent) 55%, #d1d5db);
  background: color-mix(in srgb, var(--reading-accent) 6%, #ffffff);
}

/* Choix de poste (matching) */
#view-analyse-competences .sb-choice{
  display:block;
  width:100%;
  text-align:left;
  margin:0 !important;
  margin-left:0 !important;
  padding:10px 12px;
  border-radius:10px;
  border:1px solid #e5e7eb;
  background:#ffffff;
  cursor:pointer;
}

#view-analyse-competences .sb-choice.is-selected{
  border-color: var(--reading-accent);
  background: color-mix(in srgb, var(--reading-accent) 8%, #ffffff);
}

#view-analyse-competences .sb-choice-title{
  font-weight:700;
  color:#111827;
  line-height:1.2;
}

#view-analyse-competences .sb-choice-sub{
  margin-top:2px;
  font-size:12px;
  color:#6b7280;
}

/* Analyse compétences — Toggle matching postes (fragiles / tous) */
#view-analyse-competences .sb-seg.sb-seg--match{
  font-weight: 600;          /* fini le pavé */
  letter-spacing: 0;
  border-color: #d1d5db;
  background: #fff;
}

#view-analyse-competences .sb-seg.sb-seg--match.is-active{
  border-color: var(--ui-accent);
  background: var(--ui-accent);
  color: #ffffff;
}

#view-analyse-competences .sb-seg.sb-seg--match:focus{
  outline: none;
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--ui-accent) 25%, transparent);
}


/* Segmented tabs (modals) */
.sb-seg{
  padding:6px 10px;
  border-radius:8px;
  border:1px solid #d1d5db;
  background:#ffffff;
  color:#111827;
  font-weight:900;
  cursor:pointer;
}

.sb-segbar{
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
}

#modalMatchPerson .sb-seg.sb-seg--dark.is-active{
  background:#111827;
  color:#ffffff;
}

#modalMatchPerson .sb-seg.sb-seg--dark:not(.is-active){
  background:#ffffff;
  color:#111827;
}

/* Tabs "Compétences / Couverture" (modal Analyse poste) */
#modalAnalysePoste .sb-seg.sb-seg--soft{
  font-weight:600;
}

#modalAnalysePoste .sb-seg.sb-seg--soft.is-active{
  border-color: var(--ui-accent);
  background: color-mix(in srgb, var(--ui-accent) 10%, #ffffff);
  font-weight:700;
}

#modalAnalysePoste .sb-seg.sb-seg--soft:not(.is-active){
  border-color:#d1d5db;
  background:#ffffff;
}

/* Modal analyse poste — titre */
#modalAnalysePoste #analysePosteModalTitleText{
  font-weight: 500;
}

/* ======================================================
   Modal Collaborateur: onglets (Identification / Compétences / Certifications)
   ====================================================== */

/* Barre d’onglets */
#modalCollaborateur .sb-tabbar{
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
  padding-bottom:10px;
  margin-bottom:12px;
  border-bottom:1px solid #e5e7eb;
}

/* Onglets: rouge Insights plein, texte blanc (pas de transparence) */
#modalCollaborateur .sb-seg.sb-seg--soft{
  font-weight:700;
  background: var(--accent);
  color:#ffffff;
  border-color: var(--accent);
}

/* Hover léger */
#modalCollaborateur .sb-seg.sb-seg--soft:hover{
  filter: brightness(0.95);
}

/* Actif: bordure blanche légère (inset) */
#modalCollaborateur .sb-seg.sb-seg--soft.is-active{
  background: var(--accent);
  color:#ffffff;
  border-color: var(--accent);
  box-shadow: inset 0 0 0 2px rgba(255,255,255,0.85);
}

/* Panels */
#modalCollaborateur .sb-tab-panel{ display:none; }
#modalCollaborateur .sb-tab-panel.is-active{ display:block; }

/* ======================================================
   Modal Collaborateur: header (Titre + badges)
   ====================================================== */

#modalCollaborateur .sb-collab-modal-head{
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}

#modalCollaborateur #collabModalTitle{
  white-space:nowrap;
}

#modalCollaborateur .sb-collab-modal-badges{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
  align-items:center;
}

/* ======================================================
   Modal Collaborateur: badges (statuts) — couleurs centralisées
   Objectif: 1 seul endroit pour modifier les couleurs
   ====================================================== */

#modalCollaborateur{
  /* Default (fallback) */
  --collab-badge-default-bg: #9ca3af;
  --collab-badge-default-border: #9ca3af;
  --collab-badge-default-fg: #ffffff;

  /* Statuts */
  --collab-badge-actif-bg: rgb(62,190,73);
  --collab-badge-actif-border: rgb(62,190,73);
  --collab-badge-actif-fg: #ffffff;

  --collab-badge-inactif-bg: #6b7280;
  --collab-badge-inactif-border: #6b7280;
  --collab-badge-inactif-fg: #ffffff;

  --collab-badge-archive-bg: #111827;
  --collab-badge-archive-border: #111827;
  --collab-badge-archive-fg: #ffffff;

  --collab-badge-temp-bg: #0284c7;
  --collab-badge-temp-border: #0284c7;
  --collab-badge-temp-fg: #ffffff;

  --collab-badge-manager-bg: #7c3aed;
  --collab-badge-manager-border: #7c3aed;
  --collab-badge-manager-fg: #ffffff;

  --collab-badge-formateur-bg: #a855f7;
  --collab-badge-formateur-border: #a855f7;
  --collab-badge-formateur-fg: #ffffff;

  --collab-badge-indispo-bg: #f59e0b;
  --collab-badge-indispo-border: #f59e0b;
  --collab-badge-indispo-fg: #111827;
}

/* Base badge (on cible seulement ceux du header du modal) */
#modalCollaborateur #collabModalBadges .sb-badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  height:22px;
  padding:0 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:800;
  line-height:1;
  white-space:nowrap;
  border:1px solid var(--collab-badge-default-border);
  background: var(--collab-badge-default-bg);
  color: var(--collab-badge-default-fg);
}

/* Variantes couleur (seront pleinement exploitées au PATCH 2/2 JS) */
#modalCollaborateur #collabModalBadges .sb-badge--indispo,
#modalCollaborateur #collabModalBadges .sb-badge-indispo{
  background: var(--collab-badge-indispo-bg);
  border-color: var(--collab-badge-indispo-border);
  color: var(--collab-badge-indispo-fg);
}

#modalCollaborateur #collabModalBadges .sb-badge--actif{
  background: var(--collab-badge-actif-bg);
  border-color: var(--collab-badge-actif-border);
  color: var(--collab-badge-actif-fg);
}

#modalCollaborateur #collabModalBadges .sb-badge--inactif{
  background: var(--collab-badge-inactif-bg);
  border-color: var(--collab-badge-inactif-border);
  color: var(--collab-badge-inactif-fg);
}

#modalCollaborateur #collabModalBadges .sb-badge--temp{
  background: var(--collab-badge-temp-bg);
  border-color: var(--collab-badge-temp-border);
  color: var(--collab-badge-temp-fg);
}

#modalCollaborateur #collabModalBadges .sb-badge--manager{
  background: var(--collab-badge-manager-bg);
  border-color: var(--collab-badge-manager-border);
  color: var(--collab-badge-manager-fg);
}

#modalCollaborateur #collabModalBadges .sb-badge--formateur{
  background: var(--collab-badge-formateur-bg);
  border-color: var(--collab-badge-formateur-border);
  color: var(--collab-badge-formateur-fg);
}

#modalCollaborateur #collabModalBadges .sb-badge--archive{
  background: var(--collab-badge-archive-bg);
  border-color: var(--collab-badge-archive-border);
  color: var(--collab-badge-archive-fg);
}

/* ======================================================
   Modal Collaborateur: onglet Identification (blocs + contrôles prêts édition)
   ====================================================== */

#modalCollaborateur .sb-collab-block{
  padding:12px;
  border:1px solid #e5e7eb;
  border-radius:12px;
  background:#ffffff;
}

#modalCollaborateur .sb-collab-block + .sb-collab-block{
  margin-top:12px;
}

#modalCollaborateur .sb-collab-block-title{
  margin:0 0 10px 0;
  font-weight:800;
  font-size:13px;
  color:#111827;
}

#modalCollaborateur .sb-collab-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap:10px 14px;
}

/* évite les débordements dans les grilles */
#modalCollaborateur .sb-collab-grid > *{
  min-width:0;
}

#modalCollaborateur input.sb-ctrl,
#modalCollaborateur textarea.sb-ctrl{
  width:100%;
  box-sizing:border-box;
  border:1px solid #d1d5db !important;
  background:#ffffff !important;
  padding:8px 10px;
  border-radius:10px;
  font-family:inherit;
  font-size:13px;
  color:#111827;
  text-align:left;
  outline:none;
  box-shadow:none;
}

#modalCollaborateur .sb-select{
  width:100%;
  box-sizing:border-box;
}

@media (max-width: 780px){
  #modalCollaborateur .sb-collab-grid{
    grid-template-columns: 1fr;
  }
}


#modalCollaborateur .sb-collab-grid .sb-field{
  margin:0;
}

#modalCollaborateur .sb-collab-grid .sb-field .sb-label{
  display:block;
  font-weight:600;
  font-size:12px;
  color:#374151;
  margin:0 0 6px 0;
}

/* Inputs/textarea: override du input{...} global (sinon c’est transparent et centré) */
#modalCollaborateur input.sb-ctrl,
#modalCollaborateur textarea.sb-ctrl{
  width:100%;
  border:1px solid #d1d5db !important;
  background:#ffffff !important;
  padding:8px 10px;
  border-radius:10px;
  font-family:inherit;
  font-size:13px;
  color:#111827;
  text-align:left;
  outline:none;
  box-shadow:none;
}

#modalCollaborateur textarea.sb-ctrl{
  min-height:70px;
  resize:vertical;
}

/* Select: on garde .sb-select existant, mais on harmonise le focus */
#modalCollaborateur .sb-select:focus,
#modalCollaborateur input.sb-ctrl:focus,
#modalCollaborateur textarea.sb-ctrl:focus{
  outline:none;
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 25%, transparent);
  border-color: color-mix(in srgb, var(--accent) 55%, #d1d5db) !important;
}

#modalCollaborateur input.sb-ctrl:disabled,
#modalCollaborateur textarea.sb-ctrl:disabled,
#modalCollaborateur .sb-select:disabled{
  background:#f8fafc !important;
  color:#111827;
  opacity:0.85;
  cursor:not-allowed;
}

@media (max-width: 780px){
  #modalCollaborateur .sb-collab-grid{
    grid-template-columns: 1fr;
  }
}

/* Actions édition (bloc 1, en haut à droite) */
#modalCollaborateur .sb-collab-actions{
  display:flex;
  gap:8px;
  justify-content:flex-end;
  align-items:center;
  margin-bottom:10px;
}

#modalCollaborateur .sb-collab-btn{
  border-radius:10px;
  padding:7px 12px;
  font-size:12px;
  font-weight:700;
  border:1px solid transparent;
  cursor:pointer;
  line-height:1;
}

#modalCollaborateur .sb-collab-btn:disabled{
  opacity:0.6;
  cursor:not-allowed;
}

#modalCollaborateur .sb-collab-btn--edit,
#modalCollaborateur .sb-collab-btn--save{
  background:var(--accent);
  color:#fff;
  border-color:var(--accent);
}

#modalCollaborateur .sb-collab-btn--edit:hover,
#modalCollaborateur .sb-collab-btn--save:hover{
  filter:brightness(0.95);
}

#modalCollaborateur .sb-collab-btn--cancel{
  background:#ffffff;
  color:#111827;
  border-color:#d1d5db;
}

#modalCollaborateur .sb-collab-btn--cancel:hover{
  background:#f9fafb;
}



/* Badges écarts (composant générique) */
.sb-gap-badges{
  display:inline-flex;
  gap:6px;
  align-items:center;
  justify-content:center;
}

.sb-gap-badges--sm .sb-gap-badge{
  height:18px;
  border-radius:4px;
  font-weight:800;
}

.sb-gap-badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:22px;
  height:22px;
  border-radius:6px;
  font-size:12px;
  font-weight:900;
  line-height:1;
  border:1px solid rgba(0,0,0,.12);
  color:#ffffff;
  background:#9ca3af;
}

.sb-gap-badge--sm{
  height:18px;
  border-radius:4px;
  font-weight:800;
}

.sb-gap-badge--missing{ background: var(--gap-missing); }
.sb-gap-badge--under{ background: var(--gap-under); }

.sb-gap-badge.is-zero{
  background: var(--gap-zero-bg);
  color: var(--gap-zero-fg);
  border:1px solid var(--gap-zero-border);
}

/* Légende (écarts) */
.sb-gap-legend{
  display:flex;
  gap:14px;
  flex-wrap:wrap;
  align-items:center;
  font-size:12px;
  color:#6b7280;
}

.sb-gap-legend--mt{ margin-top:10px; }

.sb-gap-legend-item{
  display:inline-flex;
  gap:6px;
  align-items:center;
}

.sb-gap-swatch{
  width:12px;
  height:12px;
  border-radius:3px;
  border:1px solid rgba(0,0,0,.12);
  display:inline-block;
  background:#e5e7eb;
}

.sb-gap-swatch--missing{ background: var(--gap-missing); }
.sb-gap-swatch--under{ background: var(--gap-under); }

/* Matching (liste Postes) : focus + sélection = couleur lecture (teal) */
#view-analyse-competences button.btn-secondary.sb-choice.is-selected{
  border: 1px solid var(--reading-accent);
  background: color-mix(in srgb, var(--reading-accent) 8%, #ffffff);
}

#view-analyse-competences button.btn-secondary.sb-choice:focus,
#view-analyse-competences button.btn-secondary.sb-choice:focus-visible{
  outline: none;
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--reading-accent) 30%, transparent);
}

/* ============================
   Sidebar header: badge produit
   ============================ */

.sidebar-header{
  display:flex;
  align-items:center;
  gap:10px;
  line-height:1;
}

.sidebar-header .brand{
  font-weight:700;
  letter-spacing:.6px;
  text-transform:none;
  color:#ffffff;
}

.sidebar-header .product-badge{
  display:inline-flex;
  align-items:center;
  height:24px;
  padding:0 14px;
  border-radius:999px;

  background: var(--accent);
  color:#fff;

  font-weight:700;
  font-size:14px;
  letter-spacing:.4px;
  text-transform:none; /* "Insights" > "INSIGHTS" */

  box-shadow:
    0 1px 0 rgba(255,255,255,.14) inset,
    0 6px 14px rgba(0,0,0,.25);
  text-shadow: 0 1px 0 rgba(0,0,0,.25);
}

.sidebar-header .product-badge:hover{
  filter: brightness(1.05);
}

/* ======================================================
   Analyse compétences — Modal "Critiques impactées" (UI)
   - Tables lisibles + lignes cliquables
   - Cartes KPI compactes dans le modal
   ====================================================== */

#view-analyse-competences .sb-modal-kpis{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  margin-top:10px;
}

#view-analyse-competences .sb-metric{
  flex:1 1 220px;
  min-width:220px;
  padding:12px;
  border:1px solid #e5e7eb;
  border-radius:12px;
  background:#ffffff;
}

#view-analyse-competences .sb-metric .label{
  font-size:12px;
  color:#6b7280;
  font-weight:600;
}

#view-analyse-competences .sb-metric .value{
  margin-top:4px;
  font-size:18px;
  font-weight:800;
  color:#111827;
}

/* Tables (analyse) : même niveau de lisibilité que les autres vues */
#view-analyse-competences .sb-table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
}

#view-analyse-competences .sb-table thead th{
  text-align:left;
  font-weight:500;
  font-size:13px;
  color:#111827;
  padding:12px 14px;
  border-bottom:1px solid #e5e7eb;
  white-space:nowrap;
  background:#fafafa;
}

/* ---- Analyse — Titre + tooltip (bouton i comme Dashboard) ---- */
#view-analyse-competences .sb-th-with-tip{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

/* Analyse — icône "i" cliquable (déclenche #sbTipPortal via JS) */
#view-analyse-competences .sb-iinfo{
  width: 18px;
  height: 18px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 800;
  color: #111827;
  border: 1px solid #e5e7eb;
  background: #ffffff;
  cursor: pointer;
  user-select: none;
  outline: none;
}

#view-analyse-competences .sb-iinfo:hover{
  border-color: var(--accent);
  color: var(--accent);
}

#view-analyse-competences .sb-iinfo:focus{
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 22%, transparent);
}

/* Popover portail (hors table) */
#sbTipPortal{
  position: fixed;
  display: none;
  z-index: 99999;
  width: 320px;
  max-width: min(360px, calc(100vw - 24px));
  background: #111827;
  color: #f9fafb;
  border-radius: 12px;
  padding: 10px 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
  text-align: left;
  white-space: normal;
}

#sbTipPortal .sb-tip-title{
  font-size: 12px;
  font-weight: 900;
  margin-bottom: 8px;
}
#sbTipPortal .sb-tip-line{
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  margin: 4px 0;
}
#sbTipPortal .sb-tip-dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  display: inline-block;
}
#sbTipPortal .sb-tip-dot--r{ background: var(--accent); }
#sbTipPortal .sb-tip-dot--y{ background: #f59e0b; }
#sbTipPortal .sb-tip-dot--g{ background: #16a34a; }
#sbTipPortal .sb-tip-sep{
  height: 1px;
  background: rgba(255,255,255,.15);
  margin: 8px 0;
}
#sbTipPortal .sb-tip-mini{
  font-size: 11px;
  color: rgba(255,255,255,.82);
  margin: 2px 0;
}

#view-analyse-competences .sb-table tbody td{
  font-size:13px;
  padding:12px 14px;
  vertical-align:middle;
  border-bottom:1px solid #f3f4f6;
  line-height:1.35;
}

#view-analyse-competences .sb-table tbody tr:nth-child(even){
  background:#fafafa;
}

#view-analyse-competences .sb-table tbody tr:hover{
  background:#f3f4f6;
}

#view-analyse-competences .sb-table .col-center{
  text-align:center !important;
}

/* Lignes cliquables (modal critiques) */
#view-analyse-competences .sb-row-click{
  cursor:pointer;
}

#view-analyse-competences .sb-row-click:hover{
  background: color-mix(in srgb, var(--reading-accent) 6%, #ffffff);
}

/* Analyse compétences — bandeaux sections dans le tableau candidats (matching) */
#view-analyse-competences #matchResult tr.sb-match-section td.sb-match-section-cell{
  background: #f3f4f6;
  border-top: 1px solid #e5e7eb;
  border-bottom: 1px solid #e5e7eb;
  padding: 10px 12px;
  font-size: 15px;
  font-weight: 600;
  color: #111827;
  position: relative;
}

#view-analyse-competences #matchResult tr.sb-match-section td.sb-match-section-cell::before{
  content: "";
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background: var(--ui-accent);
  border-radius: 2px;
}

/* Analyse compétences — badge code poste */
#view-analyse-competences .sb-badge-poste-code{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:2px 8px;
  border-radius:999px;
  font-size:12px;
  font-weight:800;
  background: rgb(62,190,73);
  color:#fff;
  border:1px solid rgb(62,190,73);
  line-height:1.2;
  white-space:nowrap;
}


/* ======================================================
   Layout shell: sidebar fixe + scroll contenu (pas la page)
   ====================================================== */

html, body { height: 100%; }

body{
  height: 100vh;
  overflow: hidden; /* stop le scroll global */
}

/* Sidebar fixe visuellement (le body ne scroll plus) */
.sidebar{
  height: 100vh;
  overflow: auto; /* si le menu dépasse, il scrolle dans la sidebar */
}

/* Conteneur principal: pas de scroll ici */
.main{
  height: 100vh;
  overflow: hidden;
  min-height: 0; /* clé pour que le scroll interne marche en flex */
}

/* Seul le contenu scrolle */
.content{
  flex: 1 1 auto;
  min-height: 0; /* indispensable en flex column */
  overflow: auto; /* on force le scroll ici */
}

/* ======================================================
   Organisation: badge "X collab." (pastille soft)
   - Cible uniquement la vue "Votre organisation"
   - Exclut le badge "Responsable" (.sb-badge-accent)
   ====================================================== */
#view-votre-organisation .sb-acc-right .sb-badge:not(.sb-badge-accent){
  background: rgb(62, 190, 73) !important;     /* bleu nuit très soft */
  border-color: rgb(62, 190, 73) !important;
  color: rgba(255, 255, 255, 0.808) !important;
  font-weight: 700;
}

/* Votre organisation - rendu richtext (responsabilités HTML) */
#view-votre-organisation .sb-field.text-block .value.sb-richtext{
  padding-top: 0 !important; /* au cas où .text-block ajoute du padding */
}

#view-votre-organisation .sb-richtext{
  white-space: normal !important;
}

#view-votre-organisation .sb-richtext > :first-child{
  margin-top: 0 !important; /* supprime le gros blanc au début */
}

#view-votre-organisation .sb-richtext p{
  margin: 0 0 8px 0;
}

#view-votre-organisation .sb-richtext ul,
#view-votre-organisation .sb-richtext ol{
  margin: 0 0 8px 18px; /* pas de marge top */
  padding: 0;
}

#view-votre-organisation .sb-richtext li{
  margin: 2px 0;
}

/* ======================================================
   Votre organisation — Liste de postes (sans accordéon)
   ====================================================== */
#view-votre-organisation .org-poste-row{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
  padding:10px 12px;
  border:1px solid #e5e7eb;
  border-radius:12px;
  background:#ffffff;
  margin-bottom:10px;
}

#view-votre-organisation .org-poste-head{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:0;
}

/* Badge code poste (codif_client / code_poste) */
#view-votre-organisation .sb-badge-poste-code{
  background: rgb(62,190,73);
  color:#fff;
  border-color: rgb(62,190,73);
}

#view-votre-organisation .org-poste-head .sb-acc-title{
  margin:0;
  min-width:0;
}

#view-votre-organisation .org-poste-row:hover{
  background: color-mix(in srgb, var(--reading-accent) 6%, #ffffff);
}

/* ======================================================
   Votre organisation — Modal Poste (squelette)
   ====================================================== */

#modalOrgPoste .modal-card{
  width: min(980px, calc(100vw - 24px));
}

/* Tabs (sb-seg) actives dans CE modal */
/* Badge poste dans le modal (vert + texte blanc) */
#modalOrgPoste .sb-badge-poste-code{
  background: rgb(62,190,73);
  color:#fff;
  border-color: rgb(62,190,73);
}

/* Modal poste - Compétences requises */
.sb-badge-comp-code{
  background:#1e2a44;      /* bleu marine plus clair */
  color:#fff;
  border-color:#1e2a44;
  font-weight:600;
}

.sb-badge-niv{
  background:transparent;
  font-weight:600;
}

/* bordures orange dégradées selon niveau */
.sb-badge-niv-a{ border-color:#fdba74; color:#9a3412; }
.sb-badge-niv-b{ border-color:#fb923c; color:#9a3412; }
.sb-badge-niv-c{ border-color:#f97316; color:#7c2d12; }

.sb-dot-avalider{
  display:inline-block;
  width:10px;
  height:10px;
  border-radius:50%;
  background:var(--accent);
  opacity:0.9;
}

#orgPosteCompTable td{
  vertical-align:top;
}

/* Modal poste - table compétences : texte compétence un poil plus petit */
#orgPosteCompTable td:nth-child(2){
  font-size: 13px;
}

/* Modal poste - table certifications : même police que compétences */
#orgPosteCertTable td:nth-child(1){
  font-size: 13px;
}

#orgPosteCertTable td:nth-child(2){
  font-size: 13px;
}
/* Indicateur certification "requis" */
.sb-dot-cert-requis{
  display:inline-block;
  width:10px;
  height:10px;
  border-radius:50%;
  background: rgb(62, 190, 73); /* vert clair (cohérent projet) */
  opacity: 0.95;
}

/* Modal poste - bloc Définition */
#modalOrgPoste .org-poste-def-head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
}

#modalOrgPoste .sb-badge.sb-badge-resp{
  background: rgba(193, 39, 45, 0.18) !important;
  border: 1px solid rgb(193, 39, 45) !important;
  color: rgb(193, 39, 45) !important;
  font-weight: 800;
  white-space: nowrap;
}

#modalOrgPoste .org-poste-def-date{
  margin-top: 10px;
  font-size: 12px;
  color: #6b7280;
  text-align: right;
}

/* Responsabilités (RTF -> HTML) dans le modal */
#modalOrgPoste .sb-richtext p{ margin: 0 0 8px 0; }
#modalOrgPoste .sb-richtext ul,
#modalOrgPoste .sb-richtext ol{ margin: 0 0 8px 18px; padding:0; }
#modalOrgPoste .sb-richtext li{ margin: 2px 0; }

/* Modal Poste — FIX spacing label -> value (responsabilités)
   Cause: gap/row-gap global sur .sb-field
*/
#modalOrgPoste .sb-field.text-block{
  display: flex;
  flex-direction: column;
  gap: 6px !important;
  row-gap: 6px !important;
}

#modalOrgPoste .sb-field.text-block .label{
  margin: 0 !important;
}

#modalOrgPoste .sb-field.text-block .value{
  margin: 0 !important;
  padding: 0 !important;
}

/* Sécurité: le premier bloc HTML ne doit pas créer de "blanc" */
#modalOrgPoste .sb-richtext > :first-child{
  margin-top: 0 !important;
}


/* Onglets: accent plein, texte blanc */
#modalOrgPoste .sb-seg{
  font-weight: 700;
  background: var(--accent);
  color:#fff;
  border-color: var(--accent);
}

#modalOrgPoste .sb-seg:hover{
  filter: brightness(0.95);
}

#modalOrgPoste .sb-seg.is-active{
  background: var(--accent);
  color:#fff;
  border-color: var(--accent);
  box-shadow: inset 0 0 0 2px #ffffff;
}


/* Panels */
#modalOrgPoste .sb-tab-panel{ display:none; }
#modalOrgPoste .sb-tab-panel.is-active{ display:block; }

/* Organisation - Bloc Contraintes (Exigences) */
.org-form-grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px 14px;
  margin-top:10px;
}

.org-form-grid .sb-field{
  min-width: 0;
}

.org-form-grid .org-span-2{
  grid-column: 1 / -1;
}

.sb-check{
  display:flex;
  align-items:center;
  gap:10px;
  margin-top:6px;
}

.sb-check input[type="checkbox"]{
  width:16px;
  height:16px;
}

/* Contraintes (modal poste) : inputs/textarea/select doivent rester dans la typo du site */
#modalOrgPoste .org-form-grid input,
#modalOrgPoste .org-form-grid select,
#modalOrgPoste .org-form-grid textarea{
  font-family: inherit;
  font-size: 14px;
  line-height: 1.35;
}

/* Aide sous les selects à libellés longs (on affiche le texte complet sélectionné) */
#modalOrgPoste .org-form-grid .sb-help{
  margin-top: 6px;
  font-size: 12px;
  line-height: 1.3;
  color: #6b7280;
}

#view-votre-organisation .org-poste-row .sb-acc-title{
  font-weight:700;
  color:#111827;
  line-height:1.2;
}

#view-votre-organisation .org-poste-row .sb-acc-sub{
  margin-top:2px;
  font-size:12px;
  color:#6b7280;
}

/* ======================================================
   Votre organisation - Responsabilités (RTF -> HTML)
   Objectif: supprimer le vide inutile entre le label et le texte
   ====================================================== */

/* Le premier bloc HTML (souvent <p> ou <ul>) ne doit pas avoir de marge top */
#view-votre-organisation .sb-field.text-block .value > :first-child{
  margin-top: 0 !important;
}

/* Paragraphes: pas de gros espace par défaut */
#view-votre-organisation .sb-field.text-block .value p{
  margin: 0 0 8px 0 !important;
}

/* Listes: pas de marge top, indentation maîtrisée */
#view-votre-organisation .sb-field.text-block .value ul,
#view-votre-organisation .sb-field.text-block .value ol{
  margin: 0 0 8px 18px !important;
  padding: 0 !important;
}

#view-votre-organisation .sb-field.text-block .value li{
  margin: 2px 0 !important;
}

/* Sécurité: si .value est en pre-wrap dans ton CSS commun, on neutralise */
#view-votre-organisation .sb-field.text-block .value{
  white-space: normal !important;
}

/* ======================================================
   Modal Poste — FIX selects invisibles (Risques / Contraintes)
   ====================================================== */
#modalOrgPoste #orgCtrRisquePhys,
#modalOrgPoste #orgCtrNivContrainte{
  display: block !important;
  width: 100% !important;
  min-height: 34px !important;
  height: auto !important;
  visibility: visible !important;
  opacity: 1 !important;
}

#modalOrgPoste #orgCtrRisquePhys:disabled,
#modalOrgPoste #orgCtrNivContrainte:disabled{
  display: block !important;
}

/* ======================================================
   Modal Poste — Onglet Paramétrage RH (read-only propre)
   ====================================================== */

#modalOrgPoste .org-poste-rh-head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
  margin-bottom:10px;
}

#modalOrgPoste .org-poste-rh-actions{
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}

#modalOrgPoste .org-rh-btns{
  display:flex;
  align-items:center;
  gap:8px;
}

#modalOrgPoste .org-rh-btns .btn-secondary{
  height:32px;
  padding:6px 12px;
  font-size:13px;
  border-radius:10px;
  line-height:1;
}

#modalOrgPoste #orgRhBtnEdit{
  background: var(--accent);
  border-color: var(--accent);
  color: #fff;
}

#modalOrgPoste #orgRhBtnSave{
  background: rgb(190, 62, 73);
  border-color: rgb(190, 62, 73);
  color: #fff;
}

/* optionnel mais utile : hover léger sans casser la charte */
#modalOrgPoste #orgRhBtnEdit:hover,
#modalOrgPoste #orgRhBtnSave:hover{
  filter: brightness(0.95);
}


#modalOrgPoste .sb-badge.sb-badge-rh-lock{
  background: rgba(131, 39, 193, 0.14) !important;
  border: 1px solid rgba(131, 39, 193, 0.85) !important;
  color: rgb(131, 39, 193) !important;
  font-weight: 800;
  white-space: nowrap;
}

#modalOrgPoste .org-rh-lock-info{
  margin: 8px 0 10px 0;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(193, 39, 45, 0.25);
  background: rgba(193, 39, 45, 0.06);
  color: #374151;
  font-size: 13px;
}

#modalOrgPoste .org-rh-grid input[disabled],
#modalOrgPoste .org-rh-grid select[disabled],
#modalOrgPoste .org-rh-grid textarea[disabled]{
  background: #f8fafc;
  color: #111827;
  border-color: #e5e7eb;
}

/* Stepper (numeric up/down moderne) */
#modalOrgPoste .sb-stepper{
  display:flex;
  align-items:stretch;
  width:100%;
  min-height:38px;
  border:1px solid #e5e7eb;
  border-radius:10px;
  background:#f8fafc;
  overflow:hidden;
}

#modalOrgPoste .sb-stepper input{
  flex:1;
  border:0 !important;
  background:transparent !important;
  padding:8px 10px;
  text-align:center;
  font-family: inherit;
  font-size: 14px;
  outline:none;
  box-shadow:none;
}

#modalOrgPoste .sb-stepper-btn{
  width:40px;
  border:0;
  background:#eef2f7;
  color:#111827;
  font-weight:800;
  cursor:pointer;
}

#modalOrgPoste .sb-stepper-btn:hover:not(:disabled){
  background:#e5e7eb;
}

#modalOrgPoste .sb-stepper-btn:disabled{
  opacity:0.6;
  cursor:default;
}

/* Masquer les spinners natifs du input number */
#modalOrgPoste input[type=number]::-webkit-outer-spin-button,
#modalOrgPoste input[type=number]::-webkit-inner-spin-button{
  -webkit-appearance: none;
  margin: 0;
}
#modalOrgPoste input[type=number]{
  -moz-appearance: textfield;
}


#modalOrgPoste .org-rh-grid input[type="date"][disabled]{
  color: #111827;
}

/* Date inputs : look moderne + icône calendrier */
#modalOrgPoste .sb-date{
  width: 100%;
  min-height: 38px;
  border-radius: 10px;
  padding: 8px 40px 8px 12px;
  background: #f8fafc;
  border: 1px solid #e5e7eb;
  box-sizing: border-box;

  /* icône calendrier (SVG inline) */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='4' width='18' height='18' rx='2' ry='2'/%3E%3Cline x1='16' y1='2' x2='16' y2='6'/%3E%3Cline x1='8' y1='2' x2='8' y2='6'/%3E%3Cline x1='3' y1='10' x2='21' y2='10'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 18px 18px;
}

/* Chrome/Edge : rendre l’icône native cliquable quand ce sera activé */
#modalOrgPoste .sb-date::-webkit-calendar-picker-indicator{
  opacity: 0.85;
  cursor: pointer;
}

/* Quand disabled, on garde un rendu propre */
#modalOrgPoste .sb-date:disabled{
  color: #111827;
  opacity: 1;
}

/* ======================================================
   Organisation — FIX spacing label -> value
   Cause: .sb-field est piloté par gap/row-gap dans le CSS global
   ====================================================== */
#view-votre-organisation .sb-field.text-block{
  /* on garde la mise en page propre, mais on réduit l’espace */
  display: flex;
  flex-direction: column;
  gap: 6px !important;
  row-gap: 6px !important;
}

#view-votre-organisation .sb-field.text-block .label{
  margin: 0 !important; /* inutile si gap gère l’espace, mais on verrouille */
}

#view-votre-organisation .sb-field.text-block .value{
  margin: 0 !important;
  padding: 0 !important;
}


/* ======================================================
   Modal Collaborateur - Onglet Compétences
   ====================================================== */

/* Titre compétence: moins gras, plus lisible */
#modalCollaborateur .sb-comp-title{
  font-weight: 600;
  font-size: 13px;
  line-height: 1.25;

  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Badge Domaine: indicateur couleur (rond) */
#modalCollaborateur .sb-badge.sb-badge-domain{
  position: relative;
  padding-left: 20px;
}

#modalCollaborateur .sb-badge.sb-badge-domain::before{
  content: "";
  position: absolute;
  left: 8px;
  top: 50%;
  width: 8px;
  height: 8px;
  transform: translateY(-50%);
  border-radius: 50%;
  background: var(--dom-color, #9ca3af);
}

/* Modal Collaborateur: plus large */
#modalCollaborateur .modal-card{
  width: min(1280px, calc(100vw - 32px)) !important;
}

/* ======================================================
   Modal Collaborateur - Onglet Historique
   ====================================================== */

#modalCollaborateur .sb-history-filters{
  display:flex;
  gap:12px;
  align-items:flex-end;
  flex-wrap:wrap;
  margin:0 0 12px 0;
  padding:10px 12px;
  border:1px solid #e5e7eb;
  border-radius:12px;
  background:#fafafa;
}

#modalCollaborateur .sb-history-filters .sb-field{
  min-width: 220px;
}

#modalCollaborateur .sb-history-filters .sb-label{
  display:block;
  font-size:12px;
  font-weight:700;
  color:#374151;
  margin-bottom:4px;
}

#modalCollaborateur .sb-history-filters .sb-select{
  width:100%;
  padding:8px 10px;
  border-radius:10px;
  border:1px solid #d1d5db;
  background:#ffffff;
  color:#111827;
  font-size:13px;
}

#modalCollaborateur .sb-history-filters .sb-select:focus{
  outline:none;
  box-shadow: 0 0 0 3px var(--reading-accent-ring);
  border-color: var(--reading-accent);
}

#modalCollaborateur .sb-history-filters .sb-check{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:13px;
  color:#374151;
  user-select:none;
  padding:6px 8px;
  border-radius:10px;
}

#modalCollaborateur .sb-history-filters .sb-check:hover{
  background: color-mix(in srgb, var(--reading-accent) 6%, #ffffff);
}

#modalCollaborateur .sb-history-filters .sb-check input{
  transform: translateY(1px);
}

/* Accordéons */
#modalCollaborateur .sb-accordion{
  border:1px solid #e5e7eb;
  border-radius:12px;
  overflow:hidden;
  background:#ffffff;
  margin-bottom:10px;
}

#modalCollaborateur .sb-acc-head{
  width:100%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 12px;
  border:0;
  background:#ffffff;
  cursor:pointer;
  text-align:left;
  font-weight:700;
  color:#111827;
}

#modalCollaborateur .sb-acc-head:hover{
  background: color-mix(in srgb, var(--reading-accent) 6%, #ffffff);
}

#modalCollaborateur .sb-acc-chevron{
  font-size:14px;
  color:#6b7280;
  transition: transform .12s ease;
  flex:0 0 auto;
}

#modalCollaborateur .sb-acc-head.is-open .sb-acc-chevron{
  transform: rotate(180deg);
}

#modalCollaborateur .sb-acc-body{
  padding:12px;
  border-top:1px solid #e5e7eb;
  background:#ffffff;
}


/* ======================================================
   Entretien de performance - Slider criticité
   ====================================================== */

#view-entretien-performance .ep-crit-slider{
  display: flex;
  flex-direction: column;
  gap: 6px;
}

#view-entretien-performance .ep-crit-slider input[type="range"]{
  width: 100%;
}

#view-entretien-performance .ep-crit-slider-meta{
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 12px;
}

#view-entretien-performance #ep_rngCriticiteVal{
  display: inline-block;
  min-width: 28px;
  text-align: right;
}

/* ======================================================
   Modal générique (fallback) - détail formation historique
   ====================================================== */

.modal{
  position:fixed;
  inset:0;
  background: rgba(0,0,0,.35);
  display:none;
  align-items:center;
  justify-content:center;
  z-index: 9999;
}

.modal.show{ display:flex; }

.modal .modal-card{
  width:min(900px, 92vw);
  max-height: 88vh;
  overflow:hidden;
  background:#fff;
  border-radius: 14px;
  border:1px solid #e5e7eb;
  box-shadow: 0 14px 40px rgba(0,0,0,.20);
  display:flex;
  flex-direction:column;
}

.modal .modal-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:12px 14px;
  border-bottom:1px solid #e5e7eb;
}

.modal .modal-x{
  border:0;
  background:transparent;
  font-size:22px;
  line-height:1;
  cursor:pointer;
  color:#6b7280;
}

.modal .modal-body{
  padding:14px;
  overflow:auto;
}

.modal .modal-footer{
  padding:12px 14px;
  border-top:1px solid #e5e7eb;
  display:flex;
  justify-content:flex-end;
  gap:10px;
}



/* =========================
   Dashboard (Insights)
   ========================= */

#view-dashboard .sb-logo{
  max-width: 360px;
  height: auto;
}

#view-dashboard .sb-dash-banner{
  margin-top: 14px;
  border-left: 6px solid var(--accent);
}

#view-dashboard .sb-dash-grid{
  margin-top: 14px;
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 14px;
}

#view-dashboard .sb-dash-tile{
  min-height: 96px;
  cursor: pointer;
  transition: transform .08s ease, box-shadow .12s ease;
}

#view-dashboard .sb-dash-tile:hover{
  transform: translateY(-1px);
  box-shadow: 0 10px 25px rgba(0,0,0,.08);
}

#view-dashboard .sb-dash-tile:focus-within{
  outline: 2px solid color-mix(in srgb, var(--accent) 35%, transparent);
  outline-offset: 2px;
}


#view-dashboard .sb-dash-tile-title{
  font-weight: 700;
  font-size: 14px;
  color: #111827;
  margin-bottom: 6px;
}

#view-dashboard .sb-dash-tile-sub{
  font-size: 13px;
  color: #6b7280;
  line-height: 1.35;
}

/* Responsive */
@media (max-width: 1100px){
  #view-dashboard .sb-dash-grid{
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 740px){
  #view-dashboard .sb-dash-grid{
    grid-template-columns: 1fr;
  }
}

/* =========================
   Dashboard — Pyramide des âges
   ========================= */

/* la tuile pyramide doit être plus haute, sinon tu verras… rien */
#view-dashboard .sb-dash-tile[data-kpi="pyramide-ages"]{
  min-height: 240px;
}

#view-dashboard .sb-agepyr{
  width: 100%;
}

#view-dashboard .sb-agepyr-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom: 8px;
}

#view-dashboard .sb-agepyr-leg{
  font-size: 12px;
  font-weight: 700;
  color: #111827;
  display:inline-flex;
  align-items:center;
  gap:8px;
}

#view-dashboard .sb-agepyr-leg::before{
  content:"";
  width:12px;
  height:12px;
  border-radius:4px;
  display:inline-block;
}

#view-dashboard .sb-agepyr-leg--f::before{ background: var(--accent); }
#view-dashboard .sb-agepyr-leg--m::before{ background: var(--sidebar-bg); }

#view-dashboard .sb-agepyr-body{
  display:flex;
  flex-direction:column;
  gap: 6px;
}

/* une ligne = gauche (F) | label âge | droite (M) */
#view-dashboard .sb-agepyr-row{
  display:grid;
  grid-template-columns: 1fr 68px 1fr;
  align-items:center;
  gap: 10px;
}

#view-dashboard .sb-agepyr-lab{
  text-align:center;
  font-size: 12px;
  font-weight: 800;
  color: #374151;
  white-space: nowrap;
}

#view-dashboard .sb-agepyr-side{
  display:flex;
  align-items:center;
}

#view-dashboard .sb-agepyr-side--f{ justify-content:flex-end; }
#view-dashboard .sb-agepyr-side--m{ justify-content:flex-start; }

#view-dashboard .sb-agepyr-bar{
  height: 14px;
  border-radius: 999px;
  min-width: 2px;
  transition: width .18s ease;
}

#view-dashboard .sb-agepyr-bar--f{
  background: var(--accent);
}

#view-dashboard .sb-agepyr-bar--m{
  background: var(--sidebar-bg);
}

#view-dashboard .sb-agepyr-foot{
  margin-top: 8px;
  font-size: 12px;
  color: #6b7280;
}

#view-dashboard .sb-agepyr-kpis{
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
  margin-top: 10px;
}

#view-dashboard .sb-agepyr-kpi{
  padding: 10px 12px;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  background: #ffffff;
}

#view-dashboard .sb-agepyr-kpi-label{
  font-size: 11px;
  font-weight: 700;
  color: #6b7280;
  text-transform: none;
  letter-spacing: .04em;
  line-height: 1.1;
}

#view-dashboard .sb-agepyr-kpi-value{
  font-size: 14px;
  font-weight: 600;
  color: #111827;
  margin-top: 4px;
  line-height: 1.05;
}

#view-dashboard .sb-agepyr-kpi-sub{
  font-size: 12px;
  color: #6b7280;
  margin-top: 4px;
  line-height: 1.2;
}

/* marqueurs visuels */
#view-dashboard .sb-agepyr-kpi--risk{
  border-left: 5px solid var(--accent);
}

#view-dashboard .sb-agepyr-kpi--relay{
  border-left: 5px solid var(--sidebar-bg);
}

#view-dashboard .sb-agepyr-kpi--trans{
  border-left: 5px solid #9ca3af;
}

#view-dashboard .sb-agepyr-quality{
  margin-top: 8px;
  font-size: 12px;
  color: #6b7280;
}

/* responsive */
@media (max-width: 1100px){
  #view-dashboard .sb-agepyr-kpis{
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 740px){
  #view-dashboard .sb-agepyr-kpis{
    grid-template-columns: 1fr;
  }
}

/* =========================
   Dashboard — Jauge état global (compétences vs attentes)
   ========================= */

#view-dashboard .sb-globalgauge{
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
}

#view-dashboard .sb-globalgauge-svg{
  width: 100%;
  max-width: 320px;
  height: auto;
  display: block;
}

#view-dashboard .sb-globalgauge-note{
  margin-top: 6px;
  text-align: center;
  font-size: 12px;
  color: #6b7280;
}

/* ---- Jauge: légende + périmètre ---- */
#view-dashboard .sb-globalgauge-meta{
  width: 100%;
  max-width: 320px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: 6px;
}

#view-dashboard .sb-globalgauge-legend{
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

#view-dashboard .sb-legend-item{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: #6b7280;
  font-weight: 600;
}

#view-dashboard .sb-legend-dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  display: inline-block;
}

#view-dashboard .sb-legend-dot--r{ background: var(--accent); }
#view-dashboard .sb-legend-dot--y{ background: #f59e0b; }
#view-dashboard .sb-legend-dot--g{ background: #16a34a; }

#view-dashboard .sb-globalgauge-scope{
  text-align: center;
  font-size: 12px;
  color: #6b7280;
}

/* ---- Titre + tooltip ---- */
#view-dashboard .sb-dash-tile-title--with-tip{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

#view-dashboard .sb-tip{
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  cursor: default;
  user-select: none;
  outline: none;
}

#view-dashboard .sb-tip-ico{
  width: 18px;
  height: 18px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 800;
  color: #111827;
  border: 1px solid #e5e7eb;
  background: #ffffff;
}

#view-dashboard .sb-tip-box{
  position: absolute;
  right: 0;
  top: 24px;
  width: 260px;
  background: #111827;
  color: #f9fafb;
  border-radius: 12px;
  padding: 10px 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
  display: none;
  z-index: 50;
}

#view-dashboard .sb-tip:hover .sb-tip-box,
#view-dashboard .sb-tip:focus .sb-tip-box{
  display: block;
}

#view-dashboard .sb-tip-title{
  font-size: 12px;
  font-weight: 900;
  margin-bottom: 8px;
}

#view-dashboard .sb-tip-line{
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  margin: 4px 0;
}

#view-dashboard .sb-tip-dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  display: inline-block;
}

#view-dashboard .sb-tip-dot--r{ background: var(--accent); }
#view-dashboard .sb-tip-dot--y{ background: #f59e0b; }
#view-dashboard .sb-tip-dot--g{ background: #16a34a; }

#view-dashboard .sb-tip-sep{
  height: 1px;
  background: rgba(255,255,255,.15);
  margin: 8px 0;
}

#view-dashboard .sb-tip-mini{
  font-size: 11px;
  color: rgba(255,255,255,.82);
  margin: 2px 0;
}

/* (optionnel) un peu d’air dans la tuile */
#view-dashboard .sb-dash-tile[data-kpi="etat-global"]{
  min-height: 240px;
}

/* =========================
   Dashboard — KPI Ring (Sans formation 12 mois)
   ========================= */

#view-dashboard .sb-ring{
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  position: relative;
}

#view-dashboard .sb-ring-svg{
  width: 100%;
  max-width: 240px;
  height: auto;
  display: block;
}

#view-dashboard .sb-ring-center{
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  pointer-events: none;
}

#view-dashboard .sb-ring-pct{
  font-size: 20px;
  font-weight: 800;
  color: #111827;
  line-height: 1.05;
}

#view-dashboard .sb-ring-sub{
  margin-top: 2px;
  font-size: 12px;
  color: #6b7280;
  font-weight: 600;
  text-align: center;
}

#view-dashboard .sb-ring-note{
  margin-top: 6px;
  font-size: 12px;
  color: #6b7280;
  text-align: center;
}

/* SVG circles */
#view-dashboard .sb-ring-bg{
  stroke: rgba(0,0,0,.10);
  fill: none;
}

#view-dashboard .sb-ring-prog{
  stroke: var(--accent);
  fill: none;
  stroke-linecap: round;
  transform: rotate(-90deg);
  transform-origin: 50% 50%;
}

/* =========================
   Dashboard — Formations à venir (liste)
   ========================= */

#view-dashboard .sb-uptrain{
  width: 100%;
}

#view-dashboard .sb-uptrain-badge{
  margin-left: 8px;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 700;
  background: color-mix(in srgb, var(--accent) 10%, #ffffff);
  color: #111827;
  border: 1px solid color-mix(in srgb, var(--accent) 25%, #e5e7eb);
}

#view-dashboard .sb-uptrain-list{
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 2px;
}

#view-dashboard .sb-uptrain-row{
  display: grid;
  grid-template-columns: 92px 1fr 70px;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  border: 1px solid #f1f5f9;
  border-radius: 10px;
  background: #ffffff;
}

#view-dashboard .sb-uptrain-date{
  font-weight: 800;
  font-size: 12px;
  color: #111827;
  white-space: nowrap;
}

#view-dashboard .sb-uptrain-title{
  font-weight: 700;
  font-size: 13px;
  color: #111827;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

#view-dashboard .sb-uptrain-count{
  justify-self: end;
  font-size: 12px;
  font-weight: 800;
  color: #111827;
  white-space: nowrap;
}

#view-dashboard .sb-uptrain-more{
  margin-top: 8px;
  text-align: center;
  font-size: 12px;
  color: #6b7280;
  font-weight: 600;
}

#view-dashboard .sb-uptrain-note{
  margin-top: 8px;
  text-align: center;
  font-size: 12px;
  color: #6b7280;
}

/* Responsive: on empile un peu */
@media (max-width: 740px){
  #view-dashboard .sb-uptrain-row{
    grid-template-columns: 1fr;
    align-items: start;
  }

  #view-dashboard .sb-uptrain-count{
    justify-self: start;
  }

  #view-dashboard .sb-uptrain-title{
    white-space: normal;
  }
}

/* Dashboard — Modal détail KPI */
#modalDashDetail .modal-card{
  width: min(900px, calc(100vw - 24px));
}

#modalDashDetailBody{
  max-height: min(60vh, 560px);
  overflow: auto;
}

#modalDashDetailSub{
  color: #6b7280;
}

#modalDashDetailBody .sb-table{
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}

#modalDashDetailBody .sb-table thead th{
  text-align: left;
  font-weight: 700;
  font-size: 12px;
  color: #111827;
  padding: 10px 12px;
  border-bottom: 1px solid #e5e7eb;
  white-space: nowrap;
}

#modalDashDetailBody .sb-table tbody td{
  padding: 10px 12px;
  border-bottom: 1px solid #f1f5f9;
  vertical-align: middle;
  font-size: 13px;
  color: #111827;
}

#modalDashDetailBody .sb-muted{
  color: #6b7280;
  font-size: 12px;
}

/* Dashboard — pager dans le modal détail */
#modalDashDetail .sb-dash-pager{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-top: 12px;
  padding-top: 10px;
  border-top: 1px solid #e5e7eb;
}

#modalDashDetail .sb-dash-pager .btn-secondary{
  padding: 6px 10px;
  font-size: 12px;
}

/* Dashboard — onglets modal (pyramide des âges) */
#modalDashDetail .sb-dash-tabs{
  display: flex;
  gap: 8px;
  margin-bottom: 10px;
  padding-bottom: 10px;
  border-bottom: 1px solid #e5e7eb;
}

#modalDashDetail .sb-dash-tab{
  padding: 6px 10px;
  font-size: 12px;
}

#modalDashDetail .sb-dash-tab--active{
  border-color: var(--accent);
  color: var(--accent);
  font-weight: 800;
}
